{#- This is the shared header for the entire site -#}
<header class="header">
    <a href="{{ base_url }}" class="logo">
        <img src="{{ 'assets/icon-mono.png' | url }}" alt="Rayforge Logo" class="logo-icon">
        Rayforge
    </a>
    <nav class="nav-links">
        {#- This macro recursively finds the first page with a URL in a nav section -#}
        {% macro get_first_url(item) %}
            {% if item.url %}
                {{ item.url | url }}
            {% elif item.is_section and item.children %}
                {{ get_first_url(item.children[0]) }}
            {% endif %}
        {% endmacro %}

        {% for nav_item in nav %}
            {% if nav_item.title != 'Home' %}
                {# Use the macro to get the correct URL for the top-level nav item #}
                <a href="{{ get_first_url(nav_item) }}">{{ nav_item.title }}</a>
            {% endif %}
        {% endfor %}
    </nav>
    <div class="nav-actions">
      {% if page.is_homepage %}
        {#- On the homepage, show the "Download Now" button -#}
        <a href="{{ (config.extra.latest_docs ~ '/getting-started/installation.html') | url }}" class="btn">Download Now</a>
      {% else %}
        {#- On all other pages, show the standard search bar -#}
        {% include "partials/search.html" %}
      {% endif %}
    </div>
</header>