#!/usr/bin/make -f

%:
	dh $@ --with python3

# This override is standard and can be kept.
override_dh_auto_install:
	dh_auto_install

# Override dh_python3 to install our vendored wheel from the correct location.
override_dh_python3:
	# 1. Tell pip to look for wheels in our new vendor/wheels directory.
	# 2. Tell pip to install the 'pypotrace' package into the package's staging directory.
	#    Pip will find the correct wheel in the --find-links path and unpack it.
	pip3 install \
		--no-index \
		--find-links=file://$(CURDIR)/vendor/wheels \
		--target=$(CURDIR)/debian/rayforge/usr/lib/python3/dist-packages \
		--upgrade \
		pypotrace

	# 3. Run the original dh_python3 command, but prevent it from guessing
	#    dependencies, as we have handled our vendored one manually.
	dh_python3 --no-guessing
