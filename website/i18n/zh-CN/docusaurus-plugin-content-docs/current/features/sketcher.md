# 参数化 2D 草图器

参数化 2D 草图器是 Rayforge 中的一个强大功能，允许您直接在应用程序内创建和编辑精确的、基于约束的 2D 设计。此功能使您能够从头设计自定义零件，无需外部 CAD 软件。

## 概述

草图器提供一套完整的工具，用于创建几何形状并应用参数约束来定义元素之间的精确关系。这种方法确保您的设计即使在修改尺寸时也保持其预期的几何形状。

## 创建和编辑草图

### 创建新草图

1. 点击工具栏中的"新建草图"按钮或使用主菜单
2. 将打开一个新的空草图工作区，带有草图编辑器界面
3. 使用饼图菜单或键盘快捷键从绘图工具开始创建几何
4. 应用约束以定义元素之间的关系
5. 点击"完成草图"保存工作并返回主工作区

### 编辑现有草图

1. 在主工作区中双击基于草图的工件
2. 或者，选择草图并从上下文菜单中选择"编辑草图"
3. 使用相同的工具和约束进行修改
4. 点击"完成草图"保存更改或"取消草图"放弃它们

## 创建 2D 几何

草图器支持创建以下基本几何元素：

- **线**：在点之间绘制直线段
- **圆**：通过定义中心点和半径创建圆
- **圆弧**：通过指定中心点、起点和终点绘制圆弧
- **矩形**：通过指定两个对角绘制矩形
- **圆角矩形**：绘制带圆角的矩形
- **文本框**：向草图添加文本元素
- **填充**：填充封闭区域以创建实体区域

这些元素构成 2D 设计的基础，可以组合以创建复杂的形状。填充对于创建将被雕刻或切割为单个件的实体区域特别有用。

## 参数约束系统

约束系统是参数化草图器的核心，允许您定义精确的几何关系：

### 几何约束

- **重合**：强制两点占据相同位置
- **垂直**：约束线完全垂直
- **水平**：约束线完全水平
- **相切**：使线与圆或圆弧相切
- **垂直**：强制两条线、一条线和圆弧/圆或两个圆弧/圆以 90 度相交
- **点在线/形状上**：约束点位于线、圆弧或圆上
- **对称**：在元素之间创建对称关系。支持两种模式：
  - **点对称**：选择 3 个点（第一个是中心）
  - **线对称**：选择 2 个点和 1 条线（线是轴）

### 尺寸约束

- **距离**：设置两点之间或沿线的精确距离
- **直径**：定义圆的直径
- **半径**：设置圆或圆弧的半径
- **角度**：强制两条线之间的特定角度
- **纵横比**：强制两个距离之间的比率等于指定值
- **等长/等半径**：强制多个元素（线、圆弧或圆）具有相同的长度或半径
- **等距**：强制两个点对之间的距离相等

## 饼图菜单界面

草图器具有上下文感知的饼图菜单，可快速访问所有绘图和约束工具。当您在草图工作区中右键点击时会出现此径向菜单，并根据当前上下文和选择进行调整。

饼图菜单项目根据您选择的内容动态显示可用选项。例如，当点击空白空间时，您会看到绘图工具。当点击选定的几何时，您会看到适用的约束。

![草图器饼图菜单](/screenshots/sketcher-pie-menu.png)

## 键盘快捷键

草图器为高效工作流程提供键盘快捷键：

### 工具快捷键
- `Space`：选择工具
- `G+L`：线工具
- `G+A`：圆弧工具
- `G+C`：圆工具
- `G+R`：矩形工具
- `G+O`：圆角矩形工具
- `G+F`：填充区域工具
- `G+T`：文本框工具
- `G+N`：切换选定内容上的构造模式

### 操作快捷键
- `C+H`：添加倒角角
- `C+F`：添加圆角角

### 约束快捷键
- `H`：应用水平约束
- `V`：应用垂直约束
- `N`：应用垂直约束
- `T`：应用相切约束
- `E`：应用等长约束
- `O` 或 `C`：应用对齐约束（重合）
- `S`：应用对称约束
- `K+D`：应用距离约束
- `K+R`：应用半径约束
- `K+O`：应用直径约束
- `K+A`：应用角度约束
- `K+X`：应用纵横比约束

### 通用快捷键
- `Ctrl+Z`：撤销
- `Ctrl+Y` 或 `Ctrl+Shift+Z`：重做
- `Delete`：删除选定的元素
- `Escape`：取消当前操作或取消选择
- `F`：视图适应内容

## 构造模式

构造模式允许您将实体标记为"构造几何" - 用于指导设计但不是最终输出的一部分的辅助元素。构造实体显示方式不同（通常为虚线），并且在草图用于激光切割或雕刻时不包括在内。

切换构造模式：
- 选择一个或多个实体
- 按 `N` 或 `G+N`，或使用饼图菜单中的构造选项

构造实体对于以下用途很有用：
- 创建参考线和圆
- 定义用于对齐的临时几何
- 从导向框架构建复杂形状

## 倒角和圆角

草图器提供修改几何角落的工具：

- **倒角**：用斜边替换尖角。选择交汇点（两条线相交的地方）并应用倒角操作。
- **圆角**：用圆边替换尖角。选择交汇点（两条线相交的地方）并应用圆角操作。

使用倒角或圆角：
1. 选择两条线相交的交汇点
2. 按 `C+H` 倒角或 `C+F` 圆角
3. 使用饼图菜单或键盘快捷键应用修改

## 导入和导出

### 导出对象

您可以将任何选定的工件导出为各种矢量格式：

1. 在画布上选择工件
2. 选择 **对象 → 导出对象...**（或右键点击并从上下文菜单中选择）
3. 选择导出格式：
   - **RFS (.rfs)**：Rayforge 的原生参数化草图格式 - 保留所有约束并可以重新导入编辑
   - **SVG (.svg)**：标准矢量格式 - 与设计软件广泛兼容
   - **DXF (.dxf)**：CAD 交换格式 - 与大多数 CAD 应用程序兼容

### 保存草图

您可以将 2D 草图保存到文件以在其他项目中重用。保存时保留所有参数约束，确保您的设计保持其几何关系。

### 导入草图

保存的草图可以导入任何工作区，允许您创建常用设计元素的库。导入过程保持所有约束和尺寸关系。

## 工作流程提示

1. **从粗略几何开始**：首先创建基本形状，然后用约束细化
2. **尽早使用约束**：构建时应用约束以保持设计意图
3. **检查约束状态**：系统指示草图何时完全约束
4. **注意冲突**：相互冲突的约束以红色高亮显示
5. **利用对称**：对称约束可以显著加速复杂设计
6. **迭代和细化**：不要犹豫修改约束以获得所需的结果

## 编辑功能

- **完全撤销/重做支持**：每次操作都保存整个草图状态
- **动态光标**：光标更改以反映活动的绘图工具
- **约束可视化**：应用的约束在界面中清晰指示
- **实时更新**：约束更改立即更新几何
- **双击编辑**：双击尺寸约束（距离、半径、直径、角度、纵横比）打开对话框编辑其值
- **参数化表达式**：尺寸约束支持表达式，允许从其他参数计算值（例如，`width/2` 表示半径是宽度一半）
